{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///home/berk/stellar-projects/stellar-web3/frontend/app/stellar.ts"],"sourcesContent":["import {\n  rpc,\n  Contract,\n  Networks,\n  TransactionBuilder,\n  nativeToScVal\n} from \"@stellar/stellar-sdk\";\n\nexport const CONTRACT_ID = \"CDTGUWVP7SBJFZD2A2WYBMLP3YXFEDR5HJZ54P444HV67I2ODIORUGE3\";\n\nexport async function listenToEvents(\n  onIncrement: (value: number) => void\n) {\n  let lastLedger = (await server.getLatestLedger()).sequence;\n\n  setInterval(async () => {\n    const res = await server.getEvents({\n      startLedger: lastLedger,\n      filters: [\n        {\n          type: \"contract\",\n          contractIds: [CONTRACT_ID]\n        }\n      ]\n    });\n\n    res.events.forEach((e: any) => {\n      if (e.eventType === \"contract\") {\n        const value = Number(e.value?._value ?? 0);\n        onIncrement(value);\n      }\n    });\n\n    lastLedger = res.latestLedger + 1;\n  }, 2000);\n}\n\nexport const server = new rpc.Server(\n  \"https://soroban-testnet.stellar.org\"\n);\n\nexport const contract = new Contract(CONTRACT_ID);\n"],"names":[],"mappings":";;;;;;;;;;AAAA;;AAQO,MAAM,cAAc;AAEpB,eAAe,eACpB,WAAoC;IAEpC,IAAI,aAAa,CAAC,MAAM,OAAO,eAAe,EAAE,EAAE,QAAQ;IAE1D,YAAY;QACV,MAAM,MAAM,MAAM,OAAO,SAAS,CAAC;YACjC,aAAa;YACb,SAAS;gBACP;oBACE,MAAM;oBACN,aAAa;wBAAC;qBAAY;gBAC5B;aACD;QACH;QAEA,IAAI,MAAM,CAAC,OAAO,CAAC,CAAC;YAClB,IAAI,EAAE,SAAS,KAAK,YAAY;gBAC9B,MAAM,QAAQ,OAAO,EAAE,KAAK,EAAE,UAAU;gBACxC,YAAY;YACd;QACF;QAEA,aAAa,IAAI,YAAY,GAAG;IAClC,GAAG;AACL;AAEO,MAAM,SAAS,IAAI,sLAAG,CAAC,MAAM,CAClC;AAGK,MAAM,WAAW,IAAI,2LAAQ,CAAC"}},
    {"offset": {"line": 49, "column": 0}, "map": {"version":3,"sources":["file:///home/berk/stellar-projects/stellar-web3/frontend/app/wallet.ts"],"sourcesContent":["import {\n  getAddress,\n  signTransaction,\n  isConnected\n} from \"@stellar/freighter-api\";\n\nexport async function connectWallet() {\n  if (!(await isConnected())) {\n    throw new Error(\"Freighter not installed or locked\");\n  }\n\n  const { address } = await getAddress();\n  return address;\n}\n\nexport async function signTx(xdr: string) {\n  return signTransaction(xdr, { networkPassphrase: \"Test SDF Network ; September 2015\" });\n}\n"],"names":[],"mappings":";;;;;;AAAA;;AAMO,eAAe;IACpB,IAAI,CAAE,MAAM,IAAA,wLAAW,KAAK;QAC1B,MAAM,IAAI,MAAM;IAClB;IAEA,MAAM,EAAE,OAAO,EAAE,GAAG,MAAM,IAAA,uLAAU;IACpC,OAAO;AACT;AAEO,eAAe,OAAO,GAAW;IACtC,OAAO,IAAA,4LAAe,EAAC,KAAK;QAAE,mBAAmB;IAAoC;AACvF"}},
    {"offset": {"line": 76, "column": 0}, "map": {"version":3,"sources":["file:///home/berk/stellar-projects/stellar-web3/frontend/app/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState } from \"react\";\nimport {\n  TransactionBuilder,\n  Transaction,\n  Networks,\n  nativeToScVal\n} from \"@stellar/stellar-sdk\";\n\nimport { server, contract } from \"./stellar\";\nimport { connectWallet, signTx } from \"./wallet\";\n\nexport default function Home() {\n  const [status, setStatus] = useState(\"idle\");\n\n  const handleClick = async () => {\n    try {\n      setStatus(\"pending\");\n\n      const address = await connectWallet();\n      const account = await server.getAccount(address);\n\n      const tx = new TransactionBuilder(account, {\n        fee: \"100\",\n        networkPassphrase: Networks.TESTNET\n      })\n        .addOperation(\n          contract.call(\n            \"increment\",\n            nativeToScVal(address, { type: \"address\" })\n          )\n        )\n        .setTimeout(30)\n        .build();\n\n      const { signedTxXdr } = await signTx(tx.toXDR());\n\n      const signedTx = TransactionBuilder.fromXDR(\n        signedTxXdr,\n        Networks.TESTNET\n      ) as Transaction;\n\n      await server.sendTransaction(signedTx);\n\n      setStatus(\"success\");\n    } catch (e) {\n      console.error(e);\n      setStatus(\"failed\");\n    }\n  };\n\n  const statusColor = {\n    idle: \"text-gray-400\",\n    pending: \"text-yellow-400 animate-pulse\",\n    success: \"text-green-400\",\n    failed: \"text-red-400\"\n  }[status];\n\n  return (\n    <main className=\"min-h-screen bg-black text-yellow-400 flex items-center justify-center\">\n      <div className=\"bg-zinc-900 border border-yellow-500/40 rounded-2xl shadow-2xl p-10 w-[360px] text-center space-y-6\">\n\n        <h1 className=\"text-3xl font-bold tracking-widest\">\n          Stellar Counter\n        </h1>\n\n        <button\n          onClick={handleClick}\n          className=\"\n            w-full\n            bg-yellow-400\n            text-black\n            font-bold\n            py-3\n            rounded-xl\n            hover:bg-yellow-300\n            active:scale-95\n            transition\n            shadow-lg\n          \"\n        >\n          Increment\n        </button>\n\n        <p className={`text-sm font-mono ${statusColor}`}>\n          Status â†’ {status}\n        </p>\n\n      </div>\n    </main>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAOA;AACA;;;AAXA;;;;;AAae,SAAS;;IACtB,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,yKAAQ,EAAC;IAErC,MAAM,cAAc;QAClB,IAAI;YACF,UAAU;YAEV,MAAM,UAAU,MAAM,IAAA,6IAAa;YACnC,MAAM,UAAU,MAAM,uIAAM,CAAC,UAAU,CAAC;YAExC,MAAM,KAAK,IAAI,qMAAkB,CAAC,SAAS;gBACzC,KAAK;gBACL,mBAAmB,2LAAQ,CAAC,OAAO;YACrC,GACG,YAAY,CACX,yIAAQ,CAAC,IAAI,CACX,aACA,IAAA,gMAAa,EAAC,SAAS;gBAAE,MAAM;YAAU,KAG5C,UAAU,CAAC,IACX,KAAK;YAER,MAAM,EAAE,WAAW,EAAE,GAAG,MAAM,IAAA,sIAAM,EAAC,GAAG,KAAK;YAE7C,MAAM,WAAW,qMAAkB,CAAC,OAAO,CACzC,aACA,2LAAQ,CAAC,OAAO;YAGlB,MAAM,uIAAM,CAAC,eAAe,CAAC;YAE7B,UAAU;QACZ,EAAE,OAAO,GAAG;YACV,QAAQ,KAAK,CAAC;YACd,UAAU;QACZ;IACF;IAEA,MAAM,cAAc;QAClB,MAAM;QACN,SAAS;QACT,SAAS;QACT,QAAQ;IACV,CAAC,CAAC,OAAO;IAET,qBACE,6LAAC;QAAK,WAAU;kBACd,cAAA,6LAAC;YAAI,WAAU;;8BAEb,6LAAC;oBAAG,WAAU;8BAAqC;;;;;;8BAInD,6LAAC;oBACC,SAAS;oBACT,WAAU;8BAYX;;;;;;8BAID,6LAAC;oBAAE,WAAW,CAAC,kBAAkB,EAAE,aAAa;;wBAAE;wBACtC;;;;;;;;;;;;;;;;;;AAMpB;GA/EwB;KAAA"}}]
}